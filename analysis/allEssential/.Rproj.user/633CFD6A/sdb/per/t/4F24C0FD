{
    "contents" : "library(RMySQL)\ncon <- dbConnect(MySQL(),user=\"root\",dbname=\"t\")\ngenes <- dbReadTable(con, 'GENE')\n# to hack in logFC\ngenes$logFC <- genes$median\nhist(genes[genes$operon_pos==1,]$logFC)\n\ngenes <- genes[!is.na(genes$logFC) & genes$operon_pos>0,]\ngenes$operon_pos <- as.factor(genes$operon_pos)\ntable(genes$operon_pos)\nhist(genes$avg_lr,xlab=\"Average fitness effect at each gene\",main=\"Averaging over all replicates and sgRNA's for each gene\")\nsummary(genes)\nlibrary(ggplot2)\ncbPalette <- c(\"#999999\", \"#E69F00\", \"#56B4E9\", \"#009E73\", \"#F0E442\", \"#0072B2\", \"#D55E00\", \"#CC79A7\")\n# To use for fills, add\nscale_fill_manual(values=cbPalette)\n# To use for line and point colors, add\nscale_color_manual(values=cbPalette)\ndata=genes[as.numeric(genes$operon_pos) < 7,]\nqplot(data=data, avg_lr,geom='density',color=operon_pos)\n\nsgRNAs <- read.csv('sgRNAs_in_essential_genes.csv')\nsgRNAs$operon_pos <- as.factor(sgRNAs$operon_pos)\nsgRNAs$geneName <- as.factor(sgRNAs$geneName)\nqplot(sgRNAs$avg_lr,xlab=\"Average effect of each sgRNA\")\nqplot(sgRNAs$normalized_lr,xlab=\"Average effect of each sgRNA normalized to strongest sgRNA for each gene\")+ggtitle(expression(atop(\"Normalized distribution of sgRNAs\",atop(\"Each gene has one sgRNA with effect size=1\"))))\nsummary(sgRNAs)\nnlevels(sgRNAs$geneName)\n\nbadSgRNAs_normalized <- sgRNAs[sgRNAs$normalized_lr < .3, ]\nbadSgRNAs <- sgRNAs[ sgRNAs$avg_lr > -5,]\n-16*.3\nsgRNAs$isBad <- sgRNAs$normalized_lr < .3\nsgRNAs$isBad <- factor(sgRNAs$isBad, levels=c(FALSE,TRUE),labels=c(\"Good sgRNA\",\"Bad sgRNA\"))\n\nqplot(sgRNAs$normalized_lr,xlab=\"Average effect of each sgRNA normalized to strongest sgRNA for each gene\",geom='density',color=sgRNAs$isBad)+scale_colour_manual(values=cbPalette)\nqplot(sgRNAs$distance_ATG,xlab=\"Distance for each sgRNA from ATG\",geom='density',color=sgRNAs$isBad)+scale_colour_manual(values=cbPalette)\nboxplot(sgRNAs$distance_ATG ~ sgRNAs$isBad,ylab=\"Distance from ATG\",xlab=\"sgRNA has normalized effect > .3\")\nplot(table(sgRNAs$operon_pos) ~ sgRNAs$isBad,ylab=\"Operon position\",xlab=\"sgRNA has normalized effect > .3\")\nqplot(operon_pos,data=sgRNAs,facets=isBad ~ .,geom=\"histogram\",xlab=\"Operon position for gene\",main=\"Bad status is not a function of operon position\")+scale_x_discrete()\n",
    "created" : 1392677602398.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2738466382",
    "id" : "4F24C0FD",
    "lastKnownWriteTime" : 1397517459,
    "path" : "~/PycharmProjects/parseRegulonDB/analysis/allEssential/analyze_allEssentialGenes.R",
    "project_path" : "analyze_allEssentialGenes.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}